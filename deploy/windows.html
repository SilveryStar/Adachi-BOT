<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Windows 部署 | Adachi-Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Adachi-BOT 文档">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.26375a0d.js" as="script"><link rel="preload" href="/assets/js/2.44b34a9f.js" as="script"><link rel="preload" href="/assets/js/10.124ddafc.js" as="script"><link rel="prefetch" href="/assets/js/11.489d8bfd.js"><link rel="prefetch" href="/assets/js/12.cfcc5932.js"><link rel="prefetch" href="/assets/js/13.cba0291f.js"><link rel="prefetch" href="/assets/js/14.0a3077a9.js"><link rel="prefetch" href="/assets/js/15.7cfcc237.js"><link rel="prefetch" href="/assets/js/16.6ba74c38.js"><link rel="prefetch" href="/assets/js/17.0c07174c.js"><link rel="prefetch" href="/assets/js/18.27af8439.js"><link rel="prefetch" href="/assets/js/3.89b75435.js"><link rel="prefetch" href="/assets/js/4.9c0d3927.js"><link rel="prefetch" href="/assets/js/5.8fb2962b.js"><link rel="prefetch" href="/assets/js/6.7a505dc8.js"><link rel="prefetch" href="/assets/js/7.1ebac3c6.js"><link rel="prefetch" href="/assets/js/8.3a979435.js"><link rel="prefetch" href="/assets/js/9.ac98b8ea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Adachi-Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/deploy/" class="nav-link router-link-active">
  部署
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="/thank/" class="nav-link">
  致谢
</a></div><div class="nav-item"><a href="/picture/" class="nav-link">
  图片
</a></div><div class="nav-item"><a href="/statement/" class="nav-link">
  声明
</a></div><div class="nav-item"><a href="/developer/" class="nav-link">
  开发者
</a></div><div class="nav-item"><a href="/web-console/" class="nav-link">
  控制台
</a></div><div class="nav-item"><a href="/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="https://github.com/SilveryStar/Adachi-BOT" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/deploy/" class="nav-link router-link-active">
  部署
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="/thank/" class="nav-link">
  致谢
</a></div><div class="nav-item"><a href="/picture/" class="nav-link">
  图片
</a></div><div class="nav-item"><a href="/statement/" class="nav-link">
  声明
</a></div><div class="nav-item"><a href="/developer/" class="nav-link">
  开发者
</a></div><div class="nav-item"><a href="/web-console/" class="nav-link">
  控制台
</a></div><div class="nav-item"><a href="/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="https://github.com/SilveryStar/Adachi-BOT" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Windows 部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/deploy/windows.html#闲言碎语" class="sidebar-link">闲言碎语</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/deploy/windows.html#准备" class="sidebar-link">准备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deploy/windows.html#服务器" class="sidebar-link">服务器</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#环境" class="sidebar-link">环境</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#下载" class="sidebar-link">下载</a></li></ul></li><li><a href="/deploy/windows.html#启动" class="sidebar-link">启动</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deploy/windows.html#数据库安装" class="sidebar-link">数据库安装</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#更新" class="sidebar-link">更新</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#问题查找" class="sidebar-link">问题查找</a></li></ul></li><li><a href="/deploy/windows.html#问题解答" class="sidebar-link">问题解答</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deploy/windows.html#怎么更改指令的形式" class="sidebar-link">怎么更改指令的形式</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#关于机器人账号" class="sidebar-link">关于机器人账号</a></li><li class="sidebar-sub-header"><a href="/deploy/windows.html#运行机器人时卡住了" class="sidebar-link">运行机器人时卡住了</a></li></ul></li><li><a href="/deploy/windows.html#结" class="sidebar-link">结</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="windows-部署"><a href="#windows-部署" class="header-anchor">#</a> Windows 部署</h1> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>尽管本页面用于介绍如何在 Windows 环境中对应用进行部署，我们还是更推荐使用如 <a href="https://www.centos.org/" target="_blank" rel="noopener noreferrer">CentOS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等 Linux 发行版</p> <p>！！拒绝伸手，不提供成品号，有需要请自行部署！！</p></div> <h2 id="闲言碎语"><a href="#闲言碎语" class="header-anchor">#</a> 闲言碎语</h2> <p>偶然在B站看到关于本项目的演示视频和 Windows 中的<a href="https://www.bilibili.com/read/cv13331826" target="_blank" rel="noopener noreferrer">部署文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
，事无巨细地介绍了很多部署细节。本文也将一定程度的参考这篇文件进行介绍，同时汇总一些常见的可能出现的问题。</p> <h2 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h2> <h3 id="服务器"><a href="#服务器" class="header-anchor">#</a> 服务器</h3> <p>首先必须要知道的一点，机器人本身只是在模拟真人来对你在群聊中的种种信息做出回答，所以如果想让你的群友们24小时都能使用机器人，你就需要一台云服务器来挂着你准备的机器人QQ账号（当然，如果你打算24小时开着自己的电脑，可以跳过这一步）。</p> <p>我们的程序对服务器配置的要求并不高，学生机就足够了，参考 <a href="https://cloud.tencent.com/act/campus" target="_blank" rel="noopener noreferrer">腾讯云<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
和 <a href="https://developer.aliyun.com/plan/grow-up" target="_blank" rel="noopener noreferrer">阿里云<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，月租只需要9元。下面以腾讯云为例来介绍如何创建服务器(-¥27)。</p> <p><img src="/windows/prepare1.png" alt=""> <img src="/windows/prepare2.png" alt=""></p> <p>付费成功后，进入控制台，选择通用场景或勾选暂不需要场景教学，然后确定，并等待服务器创建完成。</p> <p>在控制台页面，点开刚刚创建成功的服务器右上角的「更多」，然后选择下拉菜单里的「管理」，在实例信息的方格中，先将服务器「关机」后，选择「重置密码」，确认设置后，点击「开机」开启服务器。</p> <p>在控制台页面的上方，有一段类似 <code>上海 | (公) xxx.xxx.xxx.xxx</code> 的文字，点击右侧即可复制你的服务器的IP。复制之后，通过远程桌面连接服务器。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如何连接远程桌面？</p> <ol><li>同时按下 Windows键 + R，在「打开」右侧的输入框中输入 <code>mstsc</code>，回车即可打开「远程桌面连接」窗口。或是按下 Windows键 后，在「开始」页面里搜索「远程桌面连接」，也能打开这个窗口。</li> <li>在打开的窗口中点击「显示选项」，「计算机」中填写上面复制的服务器IP，「用户名」在你没有进行修改的情况下是 <code>Administrator</code>。</li> <li>填写完成后可以点击下方的「另存为」将他保存在你的桌面上，以后只需双击这个文件就能连接到服务器。然后点击「连接」，不需要在意弹出的提示，只需要点击「是」即可，然后输入你前面设置的密码。</li> <li>登录进服务器后可能会弹出「仪表盘」，关闭即可。</li></ol></div> <p>以上，你就完成了服务器的设置。</p> <h3 id="环境"><a href="#环境" class="header-anchor">#</a> 环境</h3> <p>你需要先为机器人准备 <code>Node.js</code> 的运行环境，你可以在 <a href="https://nodejs.org/download/release/v14.17.2/" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 找到正确的版本。选择 <code>node-v14.17.2-x64.msi</code>
，这是为 64位 系统准备的版本，如果你正在自己的电脑上进行这些步骤，并且你的电脑安装的是 32位 系统，请选择 <code>node-v14.17.2-x86.msi</code> <s>（这年头不会还有人用 32位 吧）</s>
。你也不需要为英文的安装界面所烦恼，不需要考虑安装路径，看到能勾选的地方勾选即可，然后无脑「Next」就好。</p> <p>安装完成后最好检查版本是否正确，同时按下 Windows键 + R，在「打开」右侧的输入框中输入 <code>cmd</code>，回车打开命令行，分别输入 <code>node -v</code> 和 <code>npm -v</code> ，看到下面的输出就算环境安装成功。</p> <p><img src="/windows/env1.png" alt=""></p> <p>以上都完成后我们还建议你安装 <code>cnpm</code> ，方法十分简单，只需要在刚刚的命令行窗口中输入 <code>npm i -g cnpm</code> 即可。安装完成后同样可以通过 <code>cnpm -v</code> 来查看是否正确安装。</p> <h3 id="下载"><a href="#下载" class="header-anchor">#</a> 下载</h3> <p>最简单的方法是下载代码的压缩包，进入 <a href="https://github.com/SilveryStar/Adachi-BOT" target="_blank" rel="noopener noreferrer">项目主页<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，在页面中的绿色按钮「Code」的下拉菜单中选择「Download
ZIP」，下载到你指定的地方解压即可。</p> <p>不过这种方法可能下载速度较慢，并且以后更新机器人的版本比较麻烦，所有希望你能参考下面的方法来进行下载。</p> <ol><li>进入 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git 主页<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，然后点击 <code>Windows</code> 进入下载页面，稍等片刻后会自动弹出下载窗口。如果没有窗口弹出，则点击「Click here to download
manually」。</li> <li>下载完成后同样无脑「Next」即可完成安装。</li> <li>在任何一个你创建的文件夹中，空白处右键鼠标，选择「Git Bash
Here」，然后在弹出的命令行窗口中输入 <code>git clone https://ghproxy.com/https://github.com/SilveryStar/Adachi-BOT.git</code> ，很快就能下载完成。</li></ol> <h2 id="启动"><a href="#启动" class="header-anchor">#</a> 启动</h2> <p>我们提供了两种启动机器人的方案，事实上，处于程序运行的稳定性考虑，其实更加推荐 <code>Docker</code> 的启动方式。但处于很多看本文的人应该都没有相关的维护经验的考虑，我们还是着重介绍另一种直接启动的方法。</p> <h3 id="数据库安装"><a href="#数据库安装" class="header-anchor">#</a> 数据库安装</h3> <p>进入 <a href="https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 选择 <code>Redis-x64-3.2.100.zip</code>
进行下载并解压，然后把BOT项目中的 <code>redis.conf</code> 文件复制到解压后的目录里然后把文件里的 <code>dir /data/</code> 改为 <code>dir ./</code> ，把 <code>port 56379</code> 改为 <code>port 6379</code>
（之后需要把BOT项目里 <code>config/setting.yml</code>里的 <code>dbport</code> 改为 <code>6379</code> ），之后新建一个文本文件，可以命名为 <code>start-redis.bat</code> （注意后缀名是 <code>.bat</code>
，重命名文件时一定要把后缀名改掉不能是 <code>txt</code> ，至于怎么显示后缀名，不会可以百度下）。把下面的命令粘贴到这个脚本文件里，保存后双击运行，启动后不要关闭窗口。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>.<span class="token punctuation">\</span>redis-server.exe .<span class="token punctuation">\</span>redis.conf
</code></pre></div><h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <p>首先进入 <code>Adachi-BOT</code> 文件夹，依照上面的方法打开 <code>Git Bash</code> 命令行，输入以下两行代码来安装程序所需的文件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 设置 npm 国内镜像</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmmirror.com

<span class="token comment"># 下载项目所需依赖</span>
<span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><p>然后输入 <code>npm start</code> ，这会在当前文件夹内创建一个 <code>config</code> 文件夹，这是用来配置机器人的文件夹。</p> <p>由于服务器内自带的文件编辑器并不好用，这里建议你安装 <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VSCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。进入页面后点击「Download for
Windows」即可。如果没有弹出下载窗口的话，可以在自己的电脑上下载好安装包复制进服务器进行安装。</p> <p><code>config</code> 文件夹中包含 <code>setting.yml</code>, <code>cookies.yml</code> 和 <code>commands.yml</code> 三个文件，请按照 <a href="/config/">这里</a>
的信息进行配置，里面非常详细的说明了每个属性的作用。其中 <code>commands.yml</code> 不需要处理，只用管另外两个就好。</p> <p>对于 <code>setting</code> ，一般情况下，你只需要配置 <code>number</code>, <code>password</code>, <code>master</code> 几个属性，其他的默认情况下都是最常用的属性。此外，注意将 <code>port</code> 改为 6379 。</p> <p>对于 <code>cookies</code>
，这是用来得到米游社数据的东西，每个米游社账号都是独一无二的，<a href="/faq/#如何获得米游社-cookies">这里</a>
会告诉你如何获得它。</p> <h3 id="运行"><a href="#运行" class="header-anchor">#</a> 运行</h3> <p>一切准备就绪，输入 <code>npm restart</code> 即可启动机器人，然后保持窗口不关闭即可，远程桌面可以断开连接。现在机器人就能收发信息了。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>这里有一个容易犯的误区，<s>包括B站上的那位作者也犯了</s>，就是 <code>npm run login</code> 在这里并不需要使用，这条命令是用来帮助 <code>Docker</code> 启动验证设备的</p></div> <h3 id="更新"><a href="#更新" class="header-anchor">#</a> 更新</h3> <p>因为项目会时常更新版本，你当然可以保持较旧版本的使用，但出现 BUG 时也需要进行更新，下面简单的介绍两种更新项目的方式。</p> <h4 id="git"><a href="#git" class="header-anchor">#</a> Git</h4> <ol><li>在项目根目录下，输入 <code>git pull</code> 进行更新，若出现 <code>error: Yout local changes to the following files would be overwritten by merge:</code>
，说明本地存在修改记录无法更新。若记不起自己改了什么或无关紧要的修改，可执行 <code>git reset --hard</code> 来清除本地修改记录，然后再次尝试拉取。</li> <li>运行 <code>npm restart</code> 重启。</li></ol> <h4 id="指令更新"><a href="#指令更新" class="header-anchor">#</a> 指令更新</h4> <p>使用拥有 master 权限的账号 对 BOT 发送 <code>#upgrade</code> 指令即可开始更新，并在成功更新后自动重启 BOT。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>由于每个人的配置不同，发送无效的请使用帮助指令查看具体更新指令。<br>
以及因为众所周知的原因，从 git 上拉取代码的网络极其不稳定，出现网络问题拉取失败为正常现象，多试几次即可。</p></div> <h3 id="问题查找"><a href="#问题查找" class="header-anchor">#</a> 问题查找</h3> <p>若按在上述操作中未达到下一步的预期结果，可查看日志来排查错误，使用以下方式来查看 BOT 运行日志。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 若已全局安装 pm2，可无视这一步</span>
<span class="token function">npm</span> <span class="token function">install</span> -g pm2

<span class="token comment"># 查看日志</span>
pm2 log adachi-bot
</code></pre></div><p>若报错信息无法自行解决，可携带报错信息截图向我们的 <a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;inviteCode=ZcZDq&amp;from=246610&amp;biz=ka" target="_blank" rel="noopener noreferrer">官方频道<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
反馈。</p> <h2 id="问题解答"><a href="#问题解答" class="header-anchor">#</a> 问题解答</h2> <p>此处收集了部分 <a href="https://www.bilibili.com/read/cv13331826" target="_blank" rel="noopener noreferrer">该文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 评论区提及的问题，并做统一解答。</p> <h3 id="怎么更改指令的形式"><a href="#怎么更改指令的形式" class="header-anchor">#</a> 怎么更改指令的形式</h3> <blockquote><p>大佬，我想再请问一下，那个机器人的英文命令具体怎么更改呀，就是把mys改成米游社，aby改成深渊那种。我看您评论区里说init里面修改，但是我找不到abyss，只把command里面的abyss改成深渊可以吗</p></blockquote> <p>在第一次成功运行机器人后，<code>config</code> 文件夹里的 <code>commands.yml</code> 文件会更新。对机器人发送 <code>#help -k</code> 可以看到每个功能的指令对应的 <code>key</code> ，在 <code>commands.yml</code>
中找到你要修改的功能，然后按照 <a href="/config/#commands-yml">这里</a> 介绍的进行更改即可，例如：</p> <p>下面的是深渊查询的指令配置，默认情况下 <code>caby</code> 用于查询本期深渊，<code>laby</code> 是上期深渊。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">silvery-star.private-abyss</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> switch
  <span class="token key atrule">auth</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">scope</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">mode</span><span class="token punctuation">:</span> divided
  <span class="token key atrule">onKey</span><span class="token punctuation">:</span> caby
  <span class="token key atrule">offKey</span><span class="token punctuation">:</span> laby
  <span class="token key atrule">header</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><p>把其中的部分属性改成下面这样，即可修改上面的英文指令。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">onKey</span><span class="token punctuation">:</span> 深渊
<span class="token key atrule">offKey</span><span class="token punctuation">:</span> 上期深渊
</code></pre></div><p>下面是米游社查询的指令，默认只有 <code>mys</code> 一个关键词。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">silvery-star.private-mys</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> order
  <span class="token key atrule">auth</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">scope</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">headers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mys
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><p>同样，你也可以修改他的形式，比如:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">headers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 米游社
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>大多数时候，你不需要为一个命令配置大小写的关键词，如 <code>uid</code>, <code>Uid</code> 和 <code>UID</code>，只需要使用全小写的那个即可</p></div> <h3 id="关于机器人账号"><a href="#关于机器人账号" class="header-anchor">#</a> 关于机器人账号</h3> <blockquote><p>up最后的时候提示qq等级过低是什么问题啊？还特意去更新了一下qq不过暂时好像还是没用</p></blockquote> <p>账号密码登录时，如果QQ账号等级（就那个星星月亮的等级）较低，因为服务器登录属于异地登录，可能被腾讯风控。</p> <p>这种情况一般把账号在服务器挂一段时间就行，或者选择把 <code>setting.yml</code> 中的 <code>qrcode</code> 改成 <code>true</code>，使用扫码的方式进行登录。</p> <h3 id="运行机器人时卡住了"><a href="#运行机器人时卡住了" class="header-anchor">#</a> 运行机器人时卡住了</h3> <blockquote><p>npm start之后</p> <p>&gt; adachi-bot@2.2.0 start D:\test\Adachi-BOT-master</p> <p>&gt; ts-node -r tsconfig-paths/register app.ts --files</p></blockquote> <p>在你把 <code>setting.yml</code> 中的 <code>webConsole.enable</code> 设置为 <code>true</code> 时（<strong>注意</strong>，此时<code>jwtSecret</code>
要随便填一点内容,否则启动会报错），这里不会打印出更多消息，你可以直接在外部访问你的服务器IP进入网页控制台，详细见 <a href="/web-console/#访问">控制台</a> 。</p> <p>且在 v2.6.4 以及更高的版本下，默认情况下 <code>jwtSecret</code> 将会随机生成，且在启动成功后将会在日志中给予提示。</p> <h2 id="结"><a href="#结" class="header-anchor">#</a> 结</h2> <p>以上是我自认为最详细的 Windows 部署方法，如有疑问，请到 <a href="https://github.com/SilveryStar/Adachi-BOT" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 提交 issue，喜欢的话可以点个 <code>star</code>。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26375a0d.js" defer></script><script src="/assets/js/2.44b34a9f.js" defer></script><script src="/assets/js/10.124ddafc.js" defer></script>
  </body>
</html>
